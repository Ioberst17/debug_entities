@model IEnumerable<DDToolKit.Models.Player>

@{
    ViewBag.Title = "Game view";

}

@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<img src="https://assets.pernod-ricard.com/nz/media_images/test.jpg?hUV74FvXQrWUBk1P2.fBvzoBUmjZ1wct" alt="Filler" width="500" height="600">

<dl class="dl-horizontal" id="monster">
    <dt>
        Name
    </dt>
    <dd>
        @ViewBag.name
    </dd>
    <dt>
        Size
    </dt>
    <dd>
        @ViewBag.size
    </dd>
    <dt>
        Type
    </dt>
    <dd>
        @ViewBag.type
    </dd>
    <dt>
        Subtype
    </dt>
    <dd>
        @ViewBag.stype
    </dd>
    <dt>
        Alignment
    </dt>
    <dd>
        @ViewBag.Align
    </dd>
    <dt>
        Armor Class
    </dt>
    <dd>
        @ViewBag.ac
    </dd>
    <dt>
        Hit Points
    </dt>
    <dd>
        @ViewBag.hp
    </dd>
    <dt>
        Hit Dice
    </dt>
    <dd>
        @ViewBag.hd
    </dd>
    <dt>
        Strength
    </dt>
    <dd>
        @ViewBag.str
    </dd>
    <dt>
        Dexterity
    </dt>
    <dd>
        @ViewBag.dex
    </dd>
    <dt>
        Constitution
    </dt>
    <dd>
        @ViewBag.con
    </dd>
    <dt>
        Dexterity
    </dt>
    <dd>
        @ViewBag.name
    </dd>
    <dt>
        Inteligence
    </dt>
    <dd>
        @ViewBag.intel
    </dd>
    <dt>
        Wisdom
    </dt>
    <dd>
        @ViewBag.wis
    </dd>
    <dt>
        Charisma
    </dt>
    <dd>
        @ViewBag.cha
    </dd>
    <dt>
        Languages
    </dt>
    <dd>
        @ViewBag.lang
    </dd>
    <dt>
        Challenge Rating
    </dt>
    <dd>
        @ViewBag.chal
    </dd>
    <dt>
        Speed
    </dt>
    <dd>
        @ViewBag.speed
    </dd>
    <dt>
        Proficiencies
    </dt>
    <dd>
        @ViewBag.prof
    </dd>
    <dt>
        DamageResistance
    </dt>
    <dd>
        @ViewBag.resist
    </dd>
    <dt>
        DamageVulnerability
    </dt>
    <dd>
        @ViewBag.vuln
    </dd>
    <dt>
        DamageImmunity
    </dt>
    <dd>
        @ViewBag.immune
    </dd>
    <dt>
        ConditionImmunity
    </dt>
    <dd>
        @ViewBag.invuln
    </dd>
    <dt>
        Special Abilities
    </dt>
    <dd>
        @ViewBag.special
    </dd>
    <dt>
        SpecialAbility
    </dt>
    <dd>
        @ViewBag.special
    </dd>
    <dt>
        Actions
    </dt>
    <dd>
        @ViewBag.actions
    </dd>
    <dt>
        LegendaryActions
    </dt>
    <dd>
        @ViewBag.legactions
    </dd>
</dl>
<div>
    <button onclick="toggle()">
        Toggle Monster Information
    </button>
 
</div>
<html>
<body>
    <style type="text/css">
        body {
            font-family: Arial;
            font-size: 10pt;
        }

        .table {
            border: 1px solid #ccc;
            border-collapse: collapse;
        }

            .table th {
                background-color: #F7F7F7;
                color: #333;
                font-weight: bold;
            }

            .table th, .table td {
                padding: 5px;
                border: 1px solid #ccc;
            }
    </style>
    <table id="stats" class="table" cellpadding="0" cellspacing="0">
        <tr>
            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Size)
            </th>
            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Type)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Aligment)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.ArmorClass)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.HitPoints)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Strength)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Dexterity)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Constitution)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Intelligence)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Wisdom)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Charisma)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Languages)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Speed)
            </th>

            <th style="width:150px">
                @Html.DisplayNameFor(model => model.Proficiencies)
            </th>

            <th style="width:150px"</th>
            @*<th>
                    @Html.DisplayNameFor(model => model.DamageResistance)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.ConditionImmunity)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Senses)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.SpecialAbility)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Actions)
                </th>*@
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td class="Name">
                    <span>@Html.DisplayFor(modelItem => item.Name) </span>
                    <input type="text" value="@item.Name" style="display:none" />

                </td>

                <td class="Size">
                    <span> @Html.DisplayFor(modelItem => item.Size) </span>
                    <input type="number" value="@item.Size" style="display:none" />
                </td>

                <td class="Type">
                    <span> @Html.DisplayFor(modelItem => item.Type)</span>
                    <input type="text" value="@item.Type" style="display:none" />
                </td>

                <td class="Aligment">
                    <span> @Html.DisplayFor(modelItem => item.Aligment)</span>
                    <input type="number" value="@item.Aligment" style="display:none" />
                </td>

                <td class="ArmorClass">
                    <span> @Html.DisplayFor(modelItem => item.ArmorClass)</span>
                    <input type="number" value="@item.ArmorClass" style="display:none" />
                </td>

                <td class="HitPoints">
                    <span> @Html.DisplayFor(modelItem => item.HitPoints)</span>
                    <input type="number" value="@item.HitPoints" style="display:none" />
                </td>

                <td class="Strength">
                    <span> @Html.DisplayFor(modelItem => item.Strength)</span>
                    <input type="number" value="@item.Strength" style="display:none" />
                </td>

                <td class="Dexterity">
                    <span> @Html.DisplayFor(modelItem => item.Dexterity)</span>
                    <input type="number" value="@item.Dexterity" style="display:none" />
                </td>

                <td class="Constitution">
                    <span>@Html.DisplayFor(modelItem => item.Constitution)</span>
                    <input type="number" value="@item.Constitution" style="display:none" />
                </td>

                <td class="Intelligence">
                    <span> @Html.DisplayFor(modelItem => item.Intelligence)</span>
                    <input type="number" value="@item.Intelligence" style="display:none" />
                </td>

                <td class="Wisdom">
                    <span> @Html.DisplayFor(modelItem => item.Wisdom) </span>
                    <input type="number" value="@item.Wisdom" style="display:none" />
                </td>

                <td class="Charisma">
                    <span> @Html.DisplayFor(modelItem => item.Charisma)</span>
                    <input type="number" value="@item.Charisma" style="display:none" />
                </td>

                <td class="Language">
                    <span> @Html.DisplayFor(modelItem => item.Languages) </span>
                    <input type="text" value="@item.Languages" style="display:none" />
                </td>

                <td class="Speed">
                    <span> @Html.DisplayFor(modelItem => item.Speed) </span>
                    <input type="number" value="@item.Speed" style="display:none" />
                </td>

                <td class="Proficiencies">
                    <span> @Html.DisplayFor(modelItem => item.Proficiencies) </span>
                    <input type="text" value="@item.Proficiencies" style="display:none" />
                </td>

                <td>
                </td>
                @*<td>
                        @Html.DisplayFor(modelItem => item.DamageResistance)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.ConditionImmunity)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Senses)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.SpecialAbility)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Actions)
                    </td>*@
            </tr>
        }

    </table>



    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
    <script type="text/javascript">
        $(function () {

            if ($("#stats tr").length > 2) {
                $("#stats tr:eq(1)").remove();
            } else {
                var row = $("#stats tr:last-child");
                row.find(".Edit").hide();
                row.find("span").html('&nbsp;');
            }
        });

        function AppendRow(row, name) {

            //Bind Name.
            $(".Name", row).find("span").html(name);
            $(".Name", row).find("input").val(name);


            row.find(".Edit").show();
            $("#stats").append(row);
        };


        $("body").on("click", "#stats .Edit", function () {
            var row = $(this).closest("tr");
            $("td", row).each(function () {
                if ($(this).find("input").length > 0) {
                    $(this).find("input").show();
                    $(this).find("span").hide();
                }
            });
            row.find(".Update").show();
            row.find(".Cancel").show();
            $(this).hide();
        });

        $("body").on("click", "#stats .Update", function () {
            var row = $(this).closest("tr");
            $("td", row).each(function () {
                if ($(this).find("input").length > 0) {
                    var span = $(this).find("span");
                    var input = $(this).find("input");
                    span.html(input.val());
                    span.show();
                    input.hide();
                }
            });
            row.find(".Edit").show();
            row.find(".Cancel").hide();
            $(this).hide();

            var item = {};
            item.Name = row.find(".Name").find("span").html();
            item.size = row.find(".Size").find("span").html();
            item.type = row.find(".Type").find("span").html();
            item.aligment = row.find(".Aligment").find("span").html();
            item.armorclass = row.find(".ArmorClass").find("span").html();
            item.hitpoints = row.find(".HitPoints").find("span").html();
            item.strength = row.find(".Strength").find("span").html();
            item.dexterity = row.find(".Dexterity").find("span").html();
            item.constitution = row.find(".Constitution").find("span").html();
            item.intelligence = row.find(".Intelligence").find("span").html();
            item.wisdom = row.find(".Wisdom").find("span").html();
            item.charisma = row.find(".Charisma").find("span").html();
            item.languages = row.find(".Languages").find("span").html();
            item.speed = row.find(".Speed").find("span").html();
            item.proficiencies = row.find(".Proficiencies").find("span").html();
            $.ajax({
                type: "POST",
                url: "/Saves/Game",
                data: '{item:' + JSON.stringify(item) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json"
            });
        });


        $("body").on("click", "#stats .Cancel", function () {
            var row = $(this).closest("tr");
            $("td", row).each(function () {
                if ($(this).find("input").length > 0) {
                    var span = $(this).find("span");
                    var input = $(this).find("input");
                    input.val(span.html());
                    span.show();
                    input.hide();
                }
            });
            row.find(".Edit").show();
            row.find(".Update").hide();
            $(this).hide();
        });

    </script>
</body>
</html>
<table style="width:40%">
    <tr>
        <td style="text-align:center">
            Four-sided Die
        </td>
        <td style="text-align:center">
            <href onclick="document.getElementById('result4').innerHTML = rollDice(4)">
                <img src="https://www.wizards.com/dnd/dice/images/roll1.jpg" />
            </href>
        </td>
        <td style="text-align:center">
            <p id="result4"></p>
        </td>
    </tr>
    <tr>
        <td style="text-align:center">
            Six-sided Die
        </td>
        <td style="text-align:center">
            <href onclick="document.getElementById('result6').innerHTML = rollDice(6)">
                <img src="https://www.wizards.com/dnd/dice/images/roll1.jpg" />
            </href>
        </td>
        <td style="text-align:center">
            <p id="result6"></p>
        </td>
    </tr>
    <tr>
        <td style="text-align:center">
            Eight-sided Die
        </td>
        <td style="text-align:center">
            <href onclick="document.getElementById('result8').innerHTML = rollDice(8)">
                <img src="https://www.wizards.com/dnd/dice/images/roll1.jpg" />
            </href>
        </td>
        <td style="text-align:center">
            <p id="result8"></p>
        </td>
    </tr>
    <tr>
        <td style="text-align:center">
            Twelve-sided Die
        </td>
        <td style="text-align:center">
            <href onclick="document.getElementById('result12').innerHTML = rollDice(12)">
                <img src="https://www.wizards.com/dnd/dice/images/roll1.jpg" />
            </href>
        </td>
        <td style="text-align:center">
            <p id="result12"></p>
        </td>
    </tr>
    <tr>
        <td style="text-align:center">
            Twenty-sided Die
        </td>
        <td style="text-align:center">
            <href onclick="document.getElementById('result20').innerHTML = rollDice(20)">
                <img src="https://www.wizards.com/dnd/dice/images/roll1.jpg" />
            </href>
        </td>
        <td style="text-align:center">
            <p id="result20"></p>
        </td>
    </tr>
    <tr>
        <td style="text-align:center">
            Two Ten-sided Dice
        </td>
        <td style="text-align:center">
            <href onclick="document.getElementById('result100').innerHTML = (rollDice(100)-1)">
                <img src="https://www.wizards.com/dnd/dice/images/roll1.jpg" />
            </href>
        </td>
        <td style="text-align:center">
            <p id="result100"></p>
        </td>
    </tr>
</table>

<script type="text/javascript">

    function rollDice(max) {
        return 1 + Math.floor(Math.random() * max)
    }

    const rollDice4 = () => rollDice(4)
    const rollDice6 = () => rollDice(6)
    const rollDice8 = () => rollDice(8)
    const rollDice12 = () => rollDice(12)
    const rollDice20 = () => rollDice(20)
    const rollDice100 = () => rollDice(100)

    function toggle() {
        var x = document.getElementById("monster");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
</script>
<style>
    table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
    }
</style>
